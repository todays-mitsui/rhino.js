var E=Object.defineProperty,P=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var g=(n,t,e)=>t in n?E(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,x=(n,t)=>{for(var e in t||(t={}))L.call(t,e)&&g(n,e,t[e]);if(w)for(var e of w(t))D.call(t,e)&&g(n,e,t[e]);return n},p=(n,t)=>P(n,_(t));var c=(n,t,e)=>(g(n,typeof t!="symbol"?t+"":t,e),e);import{m as i}from"./vendor.5e96b68d.js";const S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}};S();const v=class{constructor(){c(this,"_enable",!0);c(this,"callbacks",[]);c(this,"ax");c(this,"ay");c(this,"az");c(this,"gx");c(this,"gy");c(this,"gz");this.ax=0,this.ay=0,this.az=0,this.gx=0,this.gy=0,this.gz=0}async requestPermission(){if(DeviceMotionEvent==null)return this._enable=!1;if(!("requestPermission"in DeviceMotionEvent))return this._enable=!0;const t=await DeviceMotionEvent.requestPermission();return this._enable=t=="granted"}hander(t){const e=v.K;let{x:o,y:r,z:s}=t.acceleration,{x:a,y:l,z:f}=t.accelerationIncludingGravity;o==null&&r==null&&s==null&&(this._enable=!1,window.removeEventListener("devicemotion",this.hander)),this.ax=(1-e)*this.ax+e*o,this.ay=(1-e)*this.ay+e*r,this.az=(1-e)*this.az+e*s,this.gx=(1-e)*this.gx+e*a,this.gy=(1-e)*this.gy+e*l,this.gz=(1-e)*this.gz+e*f;for(let d of this.callbacks)d(t)}onDeviceMotion(t){this.callbacks.push(t)}get enable(){return this._enable}get acceleration(){if(!this._enable)return{x:0,y:0,z:0,norm:0};const t=this.ax*this.ax+this.ay*this.ay+this.az*this.az;return{x:this.ax,y:this.ay,z:this.az,norm:t}}get gravity(){return this._enable?{x:this.gx,y:this.gy,z:this.gz}:{x:0,y:0,z:0}}};let y=v;c(y,"K",.01);function k(n,t){const e=12,o=12,r=20,s={isStatic:!0,render:{fillStyle:"#ffffff"}},a=i.exports.Bodies.rectangle(n/2,o-r/2,n,r,s),l=i.exports.Bodies.rectangle(e-r/2,t/2,r,t,p(x({},s),{restitution:.9})),f=i.exports.Bodies.rectangle(n/2,t-o+r/2,n,r,s),d=i.exports.Bodies.rectangle(n-e+r/2,t/2,r,t,p(x({},s),{restitution:.9}));return{top:a,left:l,bottom:f,right:d}}function B(n,t){const e=n.clientWidth,o=n.clientHeight,r=i.exports.Engine.create(),s=k(e,o);i.exports.World.add(r.world,[...Object.values(s),t]);const a=i.exports.Render.create({element:n,engine:r,options:{width:e,height:o,wireframes:!1,background:"transparent"}});i.exports.Render.run(a);const l=i.exports.Runner.create();return i.exports.Runner.run(l,r),{engine:r,render:a,runner:l,ground:s.bottom}}function q(){const n=Math.random()*10-5,t=-Math.random()*12-7,e=A()*O(100,.25)*.01;return{x:n,y:t,angular:e}}function A(){return Math.random()>.5?1:-1}function O(n,t){let e=0;for(let o=0;o<n;o++)Math.random()<t&&e++;return e}function R(n){const t=7-n,e=Array.from(Array(6),(o,r)=>r+1).filter(o=>![n,t].includes(o));return K(e)}function K(n){const t=Math.floor(Math.random()*n.length);return n[t]}function u(n){const t=["","\u2680","\u2681","\u2682","\u2683","\u2684","\u2685"],e=document.createElement("canvas");e.width=60,e.height=60;const o=e.getContext("2d");o.font="74px sans-serif",o.fillStyle="rgba(0, 0, 0)",o.textBaseline="middle",o.textAlign="center",o.fillText(t[n],30,30);const r=e.toDataURL();return e.remove(),r}function V(n,t,e=30){const o=i.exports.Bodies.rectangle(n,t,e,e,{angle:1,restitution:.8,friction:.05,render:{sprite:{texture:u(6),xScale:.5,yScale:.5}}});return m(o,null,4),o}function m(n,t=null,e=null,o=null){if(t==null||e==null||o==null){const{x:r,y:s,angular:a}=q();t=t||r,e=e||s,o=o||a}i.exports.Body.setVelocity(n,{x:t,y:e}),i.exports.Body.setAngularVelocity(n,o)}function I(n,t){let e=0,o=1;return()=>{const r=Math.floor(n.angle*2/Math.PI+.5)%4;if(e==r)return;const s=R(o);n.render.sprite.texture=t.get(s),e=r,o=s}}function N(n,t=500){let e=Date.now()-t;return(...o)=>{e+t<Date.now()&&(e=Date.now(),n(...o))}}const b=new y,z=document.querySelector(".start");z.addEventListener("click",async()=>{const n=await b.requestPermission();z.remove(),n&&window.addEventListener("devicemotion",t=>{b.hander(t)}),T(b)});function T(n){const t=document.querySelector("#app"),e=t.clientWidth,o=t.clientHeight,r=V(e/2,o/6),{engine:s,render:a,runner:l,ground:f}=B(t,r);t.addEventListener("click",()=>{m(r)});const d=new Map([[1,u(1)],[2,u(2)],[3,u(3)],[4,u(4)],[5,u(5)],[6,u(6)]]);i.exports.Events.on(s,"beforeUpdate",I(r,d));const M=N(h=>{m(r,null,null,h)},1200);n.onDeviceMotion(()=>{if(n.enable){const{norm:h}=n.acceleration;h>1&&M(h*.15)}})}
