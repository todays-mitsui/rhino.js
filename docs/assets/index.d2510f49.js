var v=Object.defineProperty,R=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var h=(n,e,t)=>e in n?v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,d=(n,e)=>{for(var t in e||(e={}))G.call(e,t)&&h(n,t,e[t]);if(p)for(var t of p(e))P.call(e,t)&&h(n,t,e[t]);return n},u=(n,e)=>R(n,Y(e));var o=(n,e,t)=>(h(n,typeof e!="symbol"?e+"":e,t),t);import{m as c}from"./vendor.5e96b68d.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};V();const g=class{constructor(){o(this,"_enable",!0);o(this,"callbacks",[]);o(this,"ax");o(this,"ay");o(this,"az");this.ax=0,this.ay=0,this.az=0}async init(){return DeviceMotionEvent==null?this._enable=!1:("requestPermission"in DeviceMotionEvent?this._enable=await this.requestPermission():this._enable=!0,this._enable&&window.addEventListener("devicemotion",e=>{this.hander(e)}),this._enable)}async requestPermission(){return await DeviceMotionEvent.requestPermission()=="granted"}hander(e){const t=g.K;let{x:i,y:s,z:r}=e.acceleration;i==null&&s==null&&r==null&&(this._enable=!1,window.removeEventListener("devicemotion",this.hander)),this.ax=(1-t)*this.ax+t*i,this.ay=(1-t)*this.ay+t*s,this.az=(1-t)*this.az+t*r;for(let a of this.callbacks)a(e)}on(e){this.callbacks.push(e)}off(e){this.callbacks=this.callbacks.filter(t=>t!=e)}get enable(){return this._enable}get acceleration(){if(!this._enable)return{x:0,y:0,z:0,norm:0};const e=this.ax*this.ax+this.ay*this.ay+this.az*this.az;return{x:this.ax,y:this.ay,z:this.az,norm:e}}};let l=g;o(l,"K",.01);const A=new l;function k(n,e){const t=12,i=12,s=20,r={isStatic:!0,render:{fillStyle:"transparent"}},a=c.exports.Bodies.rectangle(n/2,i-s/2,n,s,r),I=c.exports.Bodies.rectangle(t-s/2,e/2,s,e,u(d({},r),{restitution:.9})),M=c.exports.Bodies.rectangle(n/2,e-i+s/2,n,s,r),S=c.exports.Bodies.rectangle(n-t+s/2,e/2,s,e,u(d({},r),{restitution:.9}));return{top:a,left:I,bottom:M,right:S}}const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAWBJREFUaEPt2r1KA0EUhuEnhah4P16EiIWFCraC4B2oWKidjfdgJ5jCQsTLsLSxtxC0sBRkIStJ2PzOJkw2Z+uZM/Od77yznGFaGv61Gq5PCFx0h5fSwXXc4njB3HvFPt66913lYAjM1NlwsDRmKUv0BYf4zKQ8q0xIKtEQOGdnw8Ey4eP+B6NEo0TrzUAwGAz2dRNxyNSL2MhowWAwGAyOxKRnwAYOsI0VPOEOP5OF+R+dFYOFuBuc9Il57FTJxxQisxK4i/YAEWcd8b8TisxK4AWuBgh4wBG+Q2BvBrJycAcFb1XfNS6x0CXa+EOmcG4VW9jDGp5xPwV7w27+4tJpWHaim5jwmE8dntUpmiqman4IjHYp2qVZkDV+zGAwGAwGx+dlFiODwWAwHgLNgqy0mEn9YNrS85kdAss8F1cK59icT+JrW+ULp3jvjriUzylrS2kOgcLBHFxI2UPjHfwDOzAOSIUBtRgAAAAASUVORK5CYII=",j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAgNJREFUaEPt2s+LTlEcx/HXWMiPpGwkC/kHLAnJf6CmFJEVjQWSxSwQikRTZrKzYEejWLAzs5gFpSwsLG2UqElRykrNoFP3qdvTfczzNPfcec59ztne0znf9/fz/X7Pvd9zx7R8jLWcTwZMXeGRVHAjZnA2MfU+4Bg+lu2uUjADDqmyWcGOMCMZonM4iR9DEp5VIqwqRDNgw8o2puBOHMZ2vMN7/G4ANjpgOD/HMY1dJaBnuIBvkSGjA+7GLPZVgNzD1chKRgc8gpc9VHqLE/gcUcXogOHIeNwDoLJc1wwbHXAvXmBHheGvcArfa4YqLxcdMGwwhfNdEL8wgacR4cLS0QHDJlswiXPYhje4iQX8aQNgZIb/Lt+Ighkwogeygh3n9tuyyF8TEcOxaukcojlEu/qiOQdzDtbrgVxkcpHJRabenCpH1H7cxSGE78vnuIEvpS2TzcGDeNLVqQtcof8TrvM63bokAdcXyl3qERxn8Kh4liTgVjzE0R6Ad3ANy021LOrOwk24j6BU1biOWykrGGw/XajYDbiI43idOuBm3MbFEmGopFfwAEupAwb712EPDhTt/3l8xd82HBP95nWSVbRfuDAvAw76sj2Id9dq7qru6NfK6EH2zYAdb7X+P5kNxRV0uANMafzEZXwqGz2Sv1OmpNqKtmYFV3TRkE9ovYL/AEyTKEgX9ASuAAAAAElFTkSuQmCC",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAlJJREFUaEPt2s2rTVEYgPHfVb6TMpEM5B8wJCRzSZEQGRHlIxkYIIRECpkZMBEhFAP5GBhQysDA0ESJkqJIBspXb211nPY59rn3rnP3Onfv6VmttZ71rPOud717DxnwZ2jA+TSAuRselwan4hy2Z2bvJdbjVeu8yww2gDU12xj8K2ZcbtGH2IRPNdmeZRJGtEUbwD6b7ZvBuViO2XiOF/jeB9jkgHF+rsZZzGsBuond+JAYMjngfFzDohKQMziY2GRywFW428HSM2zEm4QWkwPGkXGlA0BpuB5l2OSAC3EHc0om/gCb8XGUoVq7Sw4YA5zGrjaIr9iG6wnhouvkgDHIDOzDTszCUxzDY/waBMDEDF2774vBBjDhCtTO4HRswEpMxD1cxrdhLkKtAAMuIu6ONphIFKLuM5y0rlaAa3C7g6kDBfzPHk3WCvBQcXyUMdzCVnxpAP9dgVoZ7JaYH8dRZL1FBz7IxOaajBVYhym4jxvD+O91q/w1Raduq9NU1XoM8yNtXqso2gtMFLMW4xSWIe6XcVYewduWjrIFXIqrbZW64GpP67IEnFSY29tBeWQ8l4rfsgSciYtY2wHwJCLti6QgS8BpOF/kpmWMhxGZT99qMr0Ej6pttxQW29u/L+6TT3IHjLTuBPa0EEYkjWvVBfzIHTDmPwELsKQo/z/CO/wehGOi6lbOMshUhcs6yFSFHHWDVQcey3Yjui6N5cSrjt0AdrsPVl3FsWxX2WCUFOIVdLwDzOn5jP143Trpcfk5ZU7W/jvXxuB/l6jmDQbe4B8vuUBIV71//AAAAABJRU5ErkJggg==",J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAndJREFUaEPt2k2oTVEUB/Dfk+QjKQaSAUZmokS+R6ZKKSIjQj6SZIBQJFLITGKgiKIw8jEwIMrAwNBEiZIiYqR8tercOt3O7b177rnn3nffPsN799p7/fd/rXX2+u8zZMCfoQHHJwEc7QyPSQYn4SJ2jjL23mAj3ub9LmIwAexTZhODDWLGZIg+xhZ87ZPwLCKhoxBNAGtmtjYGZ2MNZuIVXuNXh2DHYxFW4gee4CP+5ebtOsB4f67HBczJLXwH+/C5JMgpOIfdOfufOIDr+J393nWA83ALSwuAnMfRkkxuw9WCOd9nRe5FXQDX4UELll5iM8Kpdp7JuITtLYyO4ExdAOOVcaOFI4XlegRIp2XsbWgxNsAdwx90PUSX4D5mFTjzCFvxZQSg8kMm4GyWb0Wmwey1uhiMHYxisLfJkygIO3C7TXCN4Ytxt6lwxX+RDtHdNIpX1xmMRafiEPZgOp7jJJ7ib0mAYbYQx7MqHRsWgE/gQ52viQ78r8S0FgYr8bTkJAlgY+NG2tGnw3bJUCtrlkI0hWiTbJhysGwylbRLOZhyMOVgyeSpyCzlYBU5GC3SQeyqsF2Ko+OyrPFdhZ61S0XqV2xapw3vCtzsh4Y3HHmYNb3NaXUPoY59azPf+kqyGHjRqReyYcgYp+oSneZmsmGEavPTDeH3EzbhWV0AY53VuIL5OYRVSPensT83ZxSuEH0v1yndN9afgbWZPlrV5cs4LMDyTP7vyeVLmwWy8uHpJFPFSaZyWtqYsHIG21i7Z0M7uqPvmddtLJwANjZr4L+TmZhdQccd4Gh6vuMw3uWdHpOfU44m1ob1NTE47Bb1+YCBZ/A/jsBaSEI/anYAAAAASUVORK5CYII=",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAsNJREFUaEPt2kvITVEUB/DfJ29JMZAMMDITJfIemUiKhMiIkEeSDBBCIoXMJAZECGEgj4EBUQYGhiZKlBR5ZaC8WnVu3b7O9d1zH+c+vrOH96699/rv/9rrtU+PLh89XY5PAbDTGe6XDA7DKWzsMPZeYiVeleudxmABsE2ZLRgsEdMvTfQB1uBTm5hnGgl1mWgBMGdmc2NwPBZgLJ7jBX7WCXYgpmEuvuEh3uFv2bpNBxjxcylOYkLZxtexDR9qBDkCx7G5bP537MAF/Ep+bzrASbiCmSlATmBvjUyuw7mUNd8kTu5pXgCX4E4Flp5hNUKpLGM4TmN9hUl7cDQvgBEyLlVQJNVdV4F0VMLe8gqyAW4ffqPpJjoDtzEuRZn7WIuPVYAqFxmMY8l9S5sazJ7Pi8E4wXAGW3tpEg5hA65mBFcSn44bvRxX/BfXIaqbkvNqOoOx6UjswhaMxhMcwiP8qRFgTJuK/YmXjgMLwAfwNs8wUYf+DZmaC4MN0bTGRQqApYOrtqKvN9mODGUVFmMQ7uIifnQDg2npV5pnzIK1rUx0GW7+JzuJcBPBO8toK4CRfUT4SBsRAiKAf82CLo9MJos+XQ/wf4n5YRzsdBPteicT5jwEi7ACQ3EP12q4e6Wr0VZOJst9rVa2AJh3JlMtM9XK5cJglEg7samB5VKkjrOSwnceWlYuVfKM9Ra8c3C5HQreUCQ8YRS9vcctRHfsc7X2lsi1Vcui65tOrWgbRhsjMp8YTXcyE5O2YZhq79GMxu/7pJ58nBfA2Gc+zmJyGcJGtO6PYHvZmuG4oul7Js/WfWn/MViY9Ecb9fgyAFMwO2n/t+TxJaODbLh40+9gwzXOuGABMGsumvGAWyJe1xt9SzTOuGkBsHRgXf+dTLQU4gk63gA7aXzBbrwuV7pffk7ZSaz1qWvBYJ9H1OYCXc/gP3HmckjMWtkbAAAAAElFTkSuQmCC",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAAAzVJREFUaEPt2k3oVFUYBvCfKZGGCEmItkhBEAnCIBI/KkQEV4oYKEkRJBaViIiCioaJKIJJi0KlQCVRUtI2pS1aJAouXNiuTaAFIphK4iJQixfuhctwB+fO3Htn/vO/B2Yzcz7e5zznPO/HmTGGvI0ZcnwagCOd4VHJ4HgcxAcjjL1rWIXfs3bnMdgAHFBmGwZTYkblEb2ANfh7QI5nHgk9HdEGYM3M1sbgC3gTU3AFV/Fvj2DH4RUsxD/4GX/hv8y8lQMM/7kCn+PFzMKnsR63ugT5LPbjo8z4+9iIY3iYfF85wBk4ibk5QA5ge5dMvo+vc+a8nojcpboALsMPbVi6jLcRRhVpE/AF1rYZtA176wIYLuPbNobkynUHSCcl7L3Vpm+A24FHqPyIvoZzmJpjzHm8g9sdgMp2eRr7kvuWNzSY/aYuBmMHQww+abEkBGEdThUEl3Z/FWdahCt+i+sQ2U0qXpUzGItOxGZ8jOdwEZ/hFzzuEmAMm4OdiUrHhgXgT/FnnW6iB/tLGVoLg6VY2uUkDcB04zrN6POC7QipFuO9zB08jhtdspIOex7h8BfhDr7Djy2BQ+UMBrhNiaxn8YQPfBe/dQlyJo5iQcv4r7AFD+pyEy8h4s7ZOUDCwHAfqTGdYh2bqGU489YWahq+NY2eKmcwqlftfF23kUy4nS8TIHmbsgvxiayiAdiryFRxREPwIi2KbCSvrcT3dd3BEJkwJu5LHK20RdE1FDBNazq9f2m/SJwPY3m/RSbWfwqvJ25iWhKqleEmIqsIQVmKEJe+uImizJTdv3KRKdvgovM1AHtV0RgfKVJEMx+WmC6Fks5LIqS4331Ll/KqXwG614Q3QrQTg5DwhiE/tbiI9FScTVzF3YIXa6BKFkNfdOpH2TDKGLvrimSmJ2XD1rQm1q+i8HsTq/FrXQBjnTdwBLMyd62M0v0ebMjMGcIVRd9DdZbu0/UnY0lSHy3r8SVCwJcxP8ni+/L4UlAgS+/eRDJlRDKl01JgwtIZLLB237r29EbfN6sLLNwATDdr6P8n80zyBB1vgCOp3cNW/JE1elT+nXIksfZEWxsGn7hFA95h6Bn8HzUyi0jBzmCIAAAAAElFTkSuQmCC",F=new Map([[1,D],[2,j],[3,z],[4,J],[5,L],[6,f]]);function C(n,e=500){let t=Date.now()-e;return(...i)=>{t+e<Date.now()&&(t=Date.now(),n(...i))}}class U{constructor(e,t){o(this,"body");o(this,"texture",F);o(this,"currentOrthant",0);o(this,"currentPips",1);const i=e*(Math.random()*.4+.3),s=t*(Math.random()*.1+.11);this.body=c.exports.Bodies.rectangle(i,s,28,28,{angle:1,restitution:.8,friction:.05,render:{sprite:{texture:f,xScale:.5,yScale:.5}}}),this.setVelocity({y:4})}join(e,t){c.exports.World.add(t.world,this.body),e.addEventListener("click",this.setVelocity.bind(this)),c.exports.Events.on(t,"beforeUpdate",this.changeTexture.bind(this));const i=this.onAcceleration;A.on(()=>{if(A.enable){const{norm:s}=A.acceleration;s>1&&i(s*.15)}})}disappear(e,t){this.setVelocity({x:0,y:-4.5}),setTimeout(()=>{c.exports.World.remove(t.world,this.body)},600),e.removeEventListener("click",this.setVelocity),c.exports.Events.off(t,"beforeUpdate",this.changeTexture),A.off(this.onAcceleration)}changeTexture(){if(!this.body)return;const e=Math.floor(this.body.angle*2/Math.PI+.5)%4;if(this.currentOrthant==e)return;const t=this.nextPips();this.body.render.sprite.texture=this.texture.get(t),this.currentOrthant=e,this.currentPips=t}nextPips(){const e=this.currentPips,t=7-e,i=Array.from(Array(6),(s,r)=>r+1).filter(s=>![e,t].includes(s));return T(i)}get pip(){return this.currentPips}setVelocity(e={}){const{x:t,y:i,angular:s}=Object.assign({},this.nextVelocity(),e);c.exports.Body.setVelocity(this.body,{x:t,y:i}),c.exports.Body.setAngularVelocity(this.body,s)}nextVelocity(){const e=m()*w(100,.3)*.08,t=-Math.random()*12-7,i=m()*w(100,.22)*.012;return{x:e,y:t,angular:i}}get onAcceleration(){return C(e=>{this.setVelocity({angular:e})},1200)}}function m(){return Math.random()>.5?1:-1}function w(n,e){let t=0;for(let i=0;i<n;i++)Math.random()<e&&t++;return t}function T(n){const e=Math.floor(Math.random()*n.length);return n[e]}class H{constructor(e){o(this,"elem");o(this,"clientWidth");o(this,"clientHeight");o(this,"engine");o(this,"render");o(this,"runner");o(this,"_dices",[]);this.elem=e;const t=this.clientWidth=e.clientWidth,i=this.clientHeight=e.clientHeight;this.engine=c.exports.Engine.create();const s=k(t,i);c.exports.World.add(this.engine.world,Object.values(s)),this.render=c.exports.Render.create({element:e,engine:this.engine,options:{width:t,height:i,wireframes:!1,background:"transparent"}}),c.exports.Render.run(this.render),this.runner=c.exports.Runner.create(),c.exports.Runner.run(this.runner,this.engine)}putDices(e){this._dices.length!=e&&(this._dices.length>e?this.removeDice(this._dices.length-e):this._dices.length<e&&this.addDice(e-this._dices.length))}addDice(e){if(e<0)throw new Error;for(let t=0;t<e;t++){const i=new U(this.clientWidth,this.clientHeight);i.join(this.elem,this.engine),this._dices.push(i)}}removeDice(e){const t=this._dices.splice(0,e);for(const i of t)i.disappear(this.elem,this.engine)}get dices(){return this._dices.map(e=>e.pip).sort().map(e=>{switch(e){case 1:return"\u2680";case 2:return"\u2681";case 3:return"\u2682";case 4:return"\u2683";case 5:return"\u2684";case 6:return"\u2685"}}).join("")}}const E=+(localStorage.getItem("dices")||1),x=document.querySelector("#x1"),y=document.querySelector("#x2"),b=document.querySelector("#x3"),B=document.querySelector("#twitter");switch(E){case 1:x.checked=!0;break;case 2:y.checked=!0;break;case 3:b.checked=!0;break}const O=document.querySelector(".start");O.addEventListener("click",async()=>{await A.init(),O.remove(),N()});function N(){const n=document.querySelector("#app"),e=new H(n);e.putDices(E),x.addEventListener("change",()=>{e.putDices(1),localStorage.setItem("dices","1")}),y.addEventListener("change",()=>{e.putDices(2),localStorage.setItem("dices","2")}),b.addEventListener("change",()=>{e.putDices(3),localStorage.setItem("dices","3")}),B.addEventListener("click",()=>{"gtag"in window&&window.gtag("event","share",{method:"Twitter",item_id:e.dices});const t="https://todays-mitsui.github.io/rhino.js/";B.href=`http://twitter.com/share?url=${t}&text=${e.dices}%0a`})}
